<div class="container">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1><i class="bi bi-journal-text"></i> Mes Rêves</h1>
    <%= link_to "Nouveau rêve", new_dream_path, class: "btn btn-mystic" %>
  </div>

  <% if @dreams.any? %>
    <div class="row">
      <% @dreams.each do |dream| %>
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="dream-item">
            <%= link_to dream_path(dream), class: "text-decoration-none" do %>
              <div class="dream-title">
                <i class="bi bi-moon-stars"></i> <%= dream.title %>
              </div>
              <div class="dream-date">
                <i class="bi bi-calendar"></i> <%= dream.date.strftime("%d/%m/%Y") %>
              </div>
              <div class="dream-preview">
                <%= truncate(dream.content, length: 150) %>
              </div>
              <% if dream.analysis.present? %>
                <div class="mt-2">
                  <span class="badge" style="background: rgba(107, 70, 193, 0.3); color: #fbbf24;">
                    <i class="bi bi-stars"></i> Analysé
                  </span>
                </div>
              <% end %>
            <% end %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="mystic-card text-center">
      <i class="bi bi-moon" style="font-size: 4rem; color: #6b46c1; margin-bottom: 1rem;"></i>
      <h3>Aucun rêve enregistré</h3>
      <p>Commencez votre voyage onirique en enregistrant votre premier rêve.</p>
      <%= link_to "Enregistrer un rêve", new_dream_path, class: "btn btn-mystic mt-3" %>
    </div>
  <% end %>
</div>
