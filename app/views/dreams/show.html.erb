<div class="container">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="d-flex justify-content-between align-items-center mb-4">
        <%= link_to dreams_path, class: "btn btn-mystic-secondary" do %>
          <i class="bi bi-arrow-left"></i> Retour à la liste
        <% end %>
        <%= button_to dream_path(@dream), method: :delete, class: "btn btn-danger", data: { action: "click->confirm#open", confirm_title: "Supprimer ce rêve ?", confirm_message: "Cette action supprimera définitivement le rêve <strong>\"#{@dream.title}\"</strong> ainsi que son analyse.\n\nCette action est irréversible.", confirm_text: "Supprimer", confirm_type: "danger" } do %>
          <i class="bi bi-trash"></i> Supprimer ce rêve
        <% end %>
      </div>

      <div class="mystic-card mb-4">
        <h2><i class="bi bi-moon-stars"></i> <%= @dream.title %></h2>
        <p class="text-muted mb-3">
          <i class="bi bi-calendar"></i> <%= @dream.date.strftime("%d/%m/%Y") %>
        </p>
        <div class="dream-content">
          <h4 class="mb-3" style="color: #E6C868;">Description du rêve</h4>
          <p style="line-height: 1.8; white-space: pre-wrap;"><%= @dream.content %></p>
        </div>
      </div>

      <% if @analysis.present? %>
        <div class="mystic-card">
          <h2><i class="bi bi-stars"></i> Interprétation</h2>
          <div class="interpretation-text markdown-content">
            <%= markdown(@analysis.interpretation) %>
          </div>
        </div>
      <% else %>
        <div class="mystic-card">
          <div class="alert alert-warning">
            <i class="bi bi-exclamation-triangle"></i> L'analyse de ce rêve n'est pas encore disponible.
          </div>
        </div>
      <% end %>
    </div>
  </div>
</div>
